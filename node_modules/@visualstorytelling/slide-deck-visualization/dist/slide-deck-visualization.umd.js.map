{"version":3,"file":"slide-deck-visualization.umd.js","sources":["../../provenance-core/src/utils.ts","../../provenance-core/src/mitt.ts","../../provenance-core/src/ProvenanceGraph.ts","../../provenance-core/src/ProvenanceSlide.ts","../../provenance-core/src/ProvenanceSlidedeck.ts","../../provenance-core/src/ProvenanceSlidedeckPlayer.ts","../src/slide-deck-visualization.ts"],"sourcesContent":["import { ProvenanceNode, StateNode, Action, ReversibleAction } from './api';\n\nexport function generateUUID(): string {\n  // Public Domain/MIT\n  let d = new Date().getTime();\n  if (\n    typeof performance !== 'undefined' &&\n    typeof performance.now === 'function'\n  ) {\n    d += performance.now(); // use high-precision timer if available\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    let r = ((d + Math.random() * 16) % 16) | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\n/**\n * Generate a Unix timestamp in milliseconds\n *\n * @returns {number} in milliseconds\n */\nexport function generateTimestamp(): number {\n  // Removed, because performance.now() returns a floating point number, which is not compatible with the Date.getTime() integer\n  // if (\n  //   window.performance &&\n  //   window.performance.now &&\n  //   window.performance.timing &&\n  //   window.performance.timing.navigationStart\n  // ) {\n  //   return window.performance.now();\n  // }\n  return new Date().getTime();\n}\n\nexport function isStateNode(node: ProvenanceNode): node is StateNode {\n  return 'parent' in node;\n}\n\nexport function isReversibleAction(action: Action): action is ReversibleAction {\n  return 'undo' in action;\n}\n","import { Handler } from './api';\n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\n\nexport default function mitt(all?: any) {\n  all = all || Object.create(null);\n\n  return {\n    /**\n     * Register an event handler for the given type.\n     *\n     * @param  {String} type\tType of event to listen for\n     * @param  {Function} handler Function to call in response to given event\n     * @memberOf mitt\n     */\n    on(type: string, handler: Handler) {\n      (all[type] || (all[type] = [])).push(handler);\n    },\n\n    /**\n     * Remove an event handler for the given type.\n     *\n     * @param  {String} type\tType of event to unregister `handler` from\n     * @param  {Function} handler Handler function to remove\n     * @memberOf mitt\n     */\n    off(type: string, handler: Handler) {\n      if (all[type]) {\n        all[type].splice(all[type].indexOf(handler) >>> 0, 1);\n      }\n    },\n\n    /**\n     * Invoke all handlers for the given type.\n     *\n     * @param {String} type  The event type to invoke\n     * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n     * @memberOf mitt\n     */\n    emit(type: string, evt: any) {\n      (all[type] || []).slice().map((handler: Handler) => {\n        handler(evt);\n      });\n    }\n  };\n}\n","import {\n  Application,\n  Handler,\n  IProvenanceGraph,\n  NodeIdentifier,\n  ProvenanceNode,\n  RootNode,\n  SerializedProvenanceGraph,\n  SerializedProvenanceNode,\n  SerializedStateNode\n} from './api';\nimport { generateTimestamp, generateUUID, isStateNode } from './utils';\nimport mitt from './mitt';\n\n/**\n * Provenance Graph implementation\n *\n * @param version The version of the software to track the provenance of\n *\n */\nexport class ProvenanceGraph implements IProvenanceGraph {\n  public application: Application;\n  public readonly root: RootNode;\n  private _current: ProvenanceNode;\n  private _mitt: any;\n  private _nodes: { [key: string]: ProvenanceNode } = {};\n\n  constructor(application: Application, userid: string = 'Unknown', rootNode?: RootNode) {\n    this._mitt = mitt();\n    this.application = application;\n\n    if (rootNode) {\n      this.root = rootNode;\n    } else {\n      this.root = {\n        id: generateUUID(),\n        label: 'Root',\n        metadata: {\n          createdBy: userid,\n          createdOn: generateTimestamp()\n        },\n        children: [],\n        artifacts: {}\n      } as RootNode;\n    }\n    this.addNode(this.root);\n    this._current = this.root;\n  }\n\n  addNode(node: ProvenanceNode): void {\n    if (this._nodes[node.id]) {\n      throw new Error('Node already added');\n    }\n    this._nodes[node.id] = node;\n    this._mitt.emit('nodeAdded', node);\n  }\n\n  getNode(id: NodeIdentifier): ProvenanceNode {\n    const result = this._nodes[id];\n    if (!result) {\n      throw new Error('Node id not found');\n    }\n    return this._nodes[id];\n  }\n\n  get current(): ProvenanceNode {\n    return this._current;\n  }\n\n  set current(node: ProvenanceNode) {\n    if (!this._nodes[node.id]) {\n      throw new Error('Node id not found');\n    }\n    this._current = node;\n    this._mitt.emit('currentChanged', node);\n  }\n\n  get nodes() {\n    return this._nodes;\n  }\n\n  emitNodeChangedEvent(node: ProvenanceNode) {\n    /* istanbul ignore if */\n    if (!this._nodes[node.id]) {\n      throw new Error('Node id not found');\n    }\n    this._mitt.emit('nodeChanged', node);\n  }\n\n  on(type: string, handler: Handler) {\n    this._mitt.on(type, handler);\n  }\n\n  off(type: string, handler: Handler) {\n    this._mitt.off(type, handler);\n  }\n}\n\n/* Beware that deeply nested properties in serializedProvenanceGraph is mutated in the process */\nexport function restoreProvenanceGraph(\n  serializedProvenanceGraph: SerializedProvenanceGraph\n): ProvenanceGraph {\n  const nodes: { [key: string]: any } = {};\n\n  // restore nodes as key value\n  for (let node of serializedProvenanceGraph.nodes) {\n    nodes[node.id] = { ...node };\n  }\n\n  // restore parent/children relations\n  for (let nodeId of Object.keys(nodes)) {\n    const node = nodes[nodeId];\n    node.children = node.children.map((id: string) => nodes[id]);\n    if ('parent' in node) {\n      node.parent = nodes[node.parent];\n    }\n  }\n\n  const graph = new ProvenanceGraph(serializedProvenanceGraph.application);\n  (graph as any)._nodes = nodes;\n  (graph as any)._current = nodes[serializedProvenanceGraph.current];\n  (graph as any).root = nodes[serializedProvenanceGraph.root];\n\n  return graph;\n}\n\nexport function serializeProvenanceGraph(graph: ProvenanceGraph): SerializedProvenanceGraph {\n  const nodes = Object.keys(graph.nodes).map(nodeId => {\n    const node = graph.getNode(nodeId);\n    const serializedNode: SerializedProvenanceNode = { ...node } as any;\n    if (isStateNode(node)) {\n      (serializedNode as SerializedStateNode).parent = node.parent.id;\n    }\n    serializedNode.children = node.children.map(child => child.id);\n    return serializedNode;\n  });\n\n  return {\n    nodes,\n    root: graph.root.id,\n    application: graph.application,\n    current: graph.current.id\n  };\n}\n","import { IProvenanceSlide, Annotation, ProvenanceNode } from './api';\nimport { generateUUID } from './utils';\n\nexport class ProvenanceSlide implements IProvenanceSlide {\n  private _id: string;\n  private _node: ProvenanceNode | null;\n  private _name: string;\n  private _duration: number;\n  private _delay: number;\n  private _annotations: Annotation[];\n\n  constructor(\n    name: string,\n    duration: number,\n    delay: number,\n    annotations: Annotation[] = [],\n    node: ProvenanceNode | null = null\n  ) {\n    this._id = generateUUID();\n    this._name = name;\n    this._duration = duration;\n    this._delay = delay;\n    this._annotations = annotations;\n    this._node = node;\n  }\n\n  public get id(): string {\n    return this._id;\n  }\n\n  public get node(): ProvenanceNode | null {\n    return this._node;\n  }\n\n  public set node(value: ProvenanceNode | null) {\n    this._node = value;\n  }\n\n  public get name(): string {\n    return this._name;\n  }\n\n  public set name(value: string) {\n    this._name = value;\n  }\n\n  public get duration(): number {\n    return this._duration;\n  }\n\n  public set duration(value: number) {\n    this._duration = value;\n  }\n\n  public get delay(): number {\n    return this._delay;\n  }\n\n  public set delay(value: number) {\n    this._delay = value;\n  }\n\n  public addAnnotation(annotation: Annotation) {\n    this._annotations.push(annotation);\n  }\n\n  public removeAnnotation(annotation: Annotation) {\n    const index = this._annotations.indexOf(annotation);\n    this._annotations.splice(index, 1);\n  }\n\n  public get annotations() {\n    return this._annotations;\n  }\n}\n","import mitt from \"./mitt\";\nimport {\n  IProvenanceSlidedeck,\n  IProvenanceGraphTraverser,\n  IProvenanceGraph,\n  Application,\n  Handler,\n  IProvenanceSlide\n} from \"./api\";\nimport { ProvenanceSlide } from \"./ProvenanceSlide\";\n\nexport class ProvenanceSlidedeck implements IProvenanceSlidedeck {\n  private _application: Application;\n  private _graph: IProvenanceGraph;\n  private _mitt: any;\n  private _slides: IProvenanceSlide[] = [];\n  private _traverser: IProvenanceGraphTraverser;\n  private _selectedSlide: IProvenanceSlide | null;\n\n  private _captainPlaceholder = new ProvenanceSlide(\"Captain Placeholder\", 0, 0);\n\n  constructor(application: Application, traverser: IProvenanceGraphTraverser) {\n    this._mitt = mitt();\n    this._application = application;\n    this._graph = traverser.graph;\n    this._traverser = traverser;\n\n    this._selectedSlide = null;\n  }\n\n  public get application() {\n    return this._application;\n  }\n\n  public addSlide(slide?: IProvenanceSlide, index?: number): IProvenanceSlide {\n    if (\n      !index ||\n      isNaN(index) ||\n      !Number.isInteger(index) ||\n      index > this._slides.length ||\n      index < 0\n    ) {\n      index = this._slides.length;\n    }\n    if (slide && this._slides.indexOf(slide) >= 0) {\n      throw new Error(\"Cannot add a slide that is already in the deck\");\n    }\n    if (!slide) {\n      const node = this._graph.current;\n      slide = new ProvenanceSlide(node.label, 1, 0, [], node);\n    }\n    if (this._slides.length === 0) {\n      this._selectedSlide = slide;\n    }\n    this._slides.splice(index, 0, slide);\n    this._mitt.emit(\"slideAdded\", slide);\n\n    return slide;\n  }\n\n  public removeSlideAtIndex(index: number) {\n    let deletedSlides = this._slides.splice(index, 1);\n\n    // This can only be 1 slide now, therefore this is ok.\n    if (this._selectedSlide === deletedSlides[0]) {\n      this.selectedSlide = null;\n    }\n    this._mitt.emit(\"slideRemoved\", deletedSlides[0]);\n  }\n\n  public removeSlide(slide: IProvenanceSlide) {\n    this.removeSlideAtIndex(this._slides.indexOf(slide));\n  }\n\n  public get selectedSlide(): IProvenanceSlide | null {\n    return this._selectedSlide;\n  }\n\n  public moveSlide(indexFrom: number, indexTo: number) {\n    if (indexTo < 0 || indexTo > this.slides.length - 1) {\n      throw new Error(\"target index out of bounds\");\n    }\n\n    if (indexTo >= this._slides.length) {\n      let k = indexTo - this._slides.length + 1;\n      while (k--) {\n        this._slides.push(this._captainPlaceholder);\n      }\n    }\n    this._slides.splice(indexTo, 0, this._slides.splice(indexFrom, 1)[0]);\n\n    this._mitt.emit(\"slidesMoved\", this._slides);\n  }\n\n  public startTime(slide: IProvenanceSlide) {\n    const index = this._slides.indexOf(slide);\n    let previousTime = 0;\n    for (let i = 0; i < index; i++) {\n      previousTime += this._slides[i].delay;\n      previousTime += this._slides[i].duration;\n    }\n    return previousTime;\n  }\n\n  public slideAtTime(time: number) {\n    let index = 0;\n    let currentSlide = null;\n\n    while (time >= 0 && index < this.slides.length) {\n      currentSlide = this.slides[index];\n      let nextSlideOffset = currentSlide.delay + currentSlide.duration;\n\n      if (time - nextSlideOffset < 0) {\n        break;\n      }\n\n      time -= nextSlideOffset;\n      index++;\n    }\n\n    return currentSlide;\n  }\n\n  public set selectedSlide(slide: IProvenanceSlide | null) {\n    if (slide && slide.node) {\n      this._traverser.toStateNode(slide.node.id);\n    }\n    this._selectedSlide = slide;\n    this._mitt.emit(\"slideSelected\", slide);\n  }\n\n  public get slides() {\n    return this._slides;\n  }\n\n  next() {\n    if (this._selectedSlide !== null) {\n      let currentIndex = this._slides.indexOf(this._selectedSlide);\n      if (currentIndex < this._slides.length - 1) {\n        currentIndex += 1;\n        this.selectedSlide = this._slides[currentIndex];\n      } else this.selectedSlide = this._slides[0];\n    }\n  }\n  previous() {\n    if (this._selectedSlide !== null) {\n      let currentIndex = this._slides.indexOf(this._selectedSlide);\n      if (currentIndex > 0) {\n        currentIndex -= 1;\n        this.selectedSlide = this._slides[currentIndex];\n      } else {\n        this.selectedSlide = this._slides[this._slides.length - 1];\n      }\n    }\n  }\n\n  public get graph() {\n    return this._graph;\n  }\n\n  on(type: string, handler: Handler) {\n    this._mitt.on(type, handler);\n  }\n\n  off(type: string, handler: Handler) {\n    this._mitt.off(type, handler);\n  }\n}\n","export interface ISlide {\n  duration: number;\n  delay: number;\n}\n\nexport enum STATUS {\n  IDLE,\n  PLAYING\n}\n\nconst wait = (duration: number) => new Promise(resolve => setTimeout(resolve, duration));\n\nexport class ProvenanceSlidedeckPlayer<T extends ISlide> {\n  private readonly _selectCallback: (slide: T) => any;\n  private readonly _slides: T[];\n  private _currentSlideIndex: number;\n  private _status: STATUS;\n\n  constructor(slides: T[], selectCallback: (slide: T) => any) {\n    this._selectCallback = selectCallback;\n    this._slides = slides;\n    this._currentSlideIndex = 0;\n    this._status = STATUS.IDLE;\n  }\n\n  public setSlideIndex(slideIndex: number) {\n    this._currentSlideIndex = slideIndex;\n  }\n\n  public get slides() {\n    return this._slides;\n  }\n\n  public get currentSlideIndex() {\n    return this._currentSlideIndex;\n  }\n  public set currentSlideIndex(index: number) {\n    this._currentSlideIndex = index;\n  }\n  public async play() {\n    const shouldPlayNext = () =>\n      this._status === STATUS.PLAYING && this._currentSlideIndex < this._slides.length - 1;\n\n    if (this._status === STATUS.IDLE) {\n      this._status = STATUS.PLAYING;\n      this._selectCallback(this._slides[this._currentSlideIndex]);\n      do {\n        const slide = this._slides[this._currentSlideIndex];\n        await wait(slide.duration);\n        if (shouldPlayNext()) {\n          this._currentSlideIndex += 1;\n          this._selectCallback(this._slides[this._currentSlideIndex]);\n        }\n      } while (shouldPlayNext());\n    }\n    this._status = STATUS.IDLE;\n  }\n  public next() {\n    this._currentSlideIndex += 1;\n    this._selectCallback(this._slides[this._currentSlideIndex]);\n  }\n  public get status() {\n    return this._status;\n  }\n\n  public stop() {\n    this._status = STATUS.IDLE;\n  }\n}\n","import * as d3 from \"d3\";\n\nimport \"./style.css\";\n\nimport {\n    IProvenanceSlide,\n    ProvenanceSlide,\n    IProvenanceSlidedeck,\n    ProvenanceSlidedeckPlayer,\n    STATUS\n} from \"@visualstorytelling/provenance-core\";\nimport { all } from \"q\";\nimport { Stats } from \"fs\";\n\nfunction firstArgThis(f: (...args: any[]) => any) {\n    return function(this: any, ...args: any[]) {\n        return f(this, ...args);\n    };\n}\n\ntype IndexedSlide = { slide: IProvenanceSlide; startTime: number };\n\nexport class SlideDeckVisualization {\n    private _slideDeck: IProvenanceSlidedeck;\n    private _root: d3.Selection<HTMLDivElement, any, null, undefined>;\n    private _slideTable: d3.Selection<SVGElement, any, null, undefined>;\n    private _tableHeight = 1000;\n    private _tableWidth = 300;\n    private _minimumSlideDuration = 5000;\n    private _barHeightTimeMultiplier = 0.01;\n    private _barWidth = 270;\n    private _barPadding = 5;\n    private _resizebarheight = 5;\n    private _previousSlideY = 0;\n    private _lineX1 = 30;\n    private _placeholderWidth = this._tableWidth - 40;\n    private _placeholderY = 50;\n    private _placeholderHeight = 30;\n    private _maxSlides = 20;\n    private _toolbarX = 200;\n    private _toolbarY = 10;\n    private _toolbarPadding = 20;\n    private _slideDuration = 1000;\n    private _timeIndexedSlides: IndexedSlide[] = [];\n    private _player: ProvenanceSlidedeckPlayer<IProvenanceSlide>;\n    private _nextSlideY = 50;\n    private _index = (slide: IProvenanceSlide): number => {\n        return this._slideDeck.slides.indexOf(slide);\n    }\n\n    private onDelete = (slide: IProvenanceSlide) => {\n        this._slideDeck.removeSlide(slide);\n    }\n\n    private onSelect = (slide: IProvenanceSlide) => {\n        if (d3.event.defaultPrevented) return;\n\n        this._slideDeck.selectedSlide = slide;\n    }\n\n    private onMouseEnter() {\n        let toolbar = d3.event.target.parentElement.querySelector(\n            \".slide_toolbar\"\n        );\n        toolbar.style.display = \"block\";\n    }\n    private onMouseLeave() {\n        let toolbar = d3.event.target.parentElement.querySelector(\n            \".slide_toolbar\"\n        );\n        toolbar.style.display = \"none\";\n    }\n\n    private onAdd = () => {\n        let slideDeck = this._slideDeck;\n        const node = slideDeck.graph.current;\n        const slide = new ProvenanceSlide(node.label, 1000, 0, [], node);\n        slideDeck.addSlide(\n            slide,\n            slideDeck.selectedSlide\n                ? slideDeck.slides.indexOf(slideDeck.selectedSlide) + 1\n                : slideDeck.slides.length\n        );\n    }\n    private onClone = (slide: IProvenanceSlide) => {\n        let slideDeck = this._slideDeck;\n        const cloneSlide = new ProvenanceSlide(\n            slide.name,\n            1000,\n            0,\n            [],\n            slide.node\n        );\n        slideDeck.addSlide(\n            cloneSlide,\n            slideDeck.selectedSlide\n                ? slideDeck.slides.indexOf(slideDeck.selectedSlide) + 1\n                : slideDeck.slides.length\n        );\n    }\n\n    private moveDragStarted(draggedObject: any) {\n        d3.select<any, any>(this)\n            .raise()\n            .classed(\"active\", true);\n    }\n\n    private moveDragged = (that: any, draggedObject: any) => {\n        d3.select<any, any>(that).attr(\n            \"transform\",\n            (slide: IProvenanceSlide) => {\n                const originalY = this.previousSlidesHeight(slide);\n                const draggedY = d3.event.y;\n                const myIndex = this._slideDeck.slides.indexOf(slide);\n\n                if (draggedY < originalY && myIndex > 0) {\n                    // check upwards\n                    const previousSlide = this._slideDeck.slides[myIndex - 1];\n                    let previousSlideCenterY =\n                        this.previousSlidesHeight(previousSlide) +\n                        this.barTotalHeight(previousSlide) / 2;\n\n                    if (draggedY < previousSlideCenterY) {\n                        this._slideDeck.moveSlide(myIndex, myIndex - 1);\n                    }\n                } else if (\n                    draggedY > originalY &&\n                    myIndex < this._slideDeck.slides.length - 1\n                ) {\n                    // check downwards\n                    const nextSlide = this._slideDeck.slides[myIndex + 1];\n                    let nextSlideCenterY =\n                        this.previousSlidesHeight(nextSlide) +\n                        this.barTotalHeight(nextSlide) / 2;\n\n                    if (draggedY > nextSlideCenterY) {\n                        this._slideDeck.moveSlide(myIndex, myIndex + 1);\n                    }\n                }\n\n                return \"translate(30,\" + d3.event.y + \")\";\n            }\n        );\n    }\n\n    private moveDragended = (that: any, draggedObject: any) => {\n        d3.select<any, any>(that)\n            .classed(\"active\", false)\n            .attr(\"transform\", (slide: IProvenanceSlide) => {\n                return \"translate(30,\" + this.previousSlidesHeight(slide) + \")\";\n            });\n    }\n\n    private delayDragged = (that: any, slide: IProvenanceSlide) => {\n        slide.delay = Math.max(0, d3.event.y) / this._barHeightTimeMultiplier;\n        this.update();\n    }\n\n    private delaySubject = (that: any, slide: IProvenanceSlide) => {\n        return { y: this.barDelayHeight(slide) };\n    }\n\n    private durationDragged = (that: any, slide: IProvenanceSlide) => {\n        slide.duration =\n            Math.max(0, d3.event.y) / this._barHeightTimeMultiplier;\n        this.update();\n    }\n\n    private durationSubject = (that: any, slide: IProvenanceSlide) => {\n        return { y: this.barDurationHeight(slide) };\n    }\n\n    private barDelayHeight(slide: IProvenanceSlide) {\n        let calculatedHeight = this._barHeightTimeMultiplier * slide.delay;\n        return Math.max(calculatedHeight, 0);\n    }\n\n    private barDurationHeight(slide: IProvenanceSlide) {\n        let calculatedHeight = this._barHeightTimeMultiplier * slide.duration;\n        return Math.max(\n            calculatedHeight,\n            this._minimumSlideDuration * this._barHeightTimeMultiplier\n        );\n    }\n\n    private barTotalHeight(slide: IProvenanceSlide) {\n        let calculatedHeight =\n            this.barDelayHeight(slide) +\n            this.barDurationHeight(slide) +\n            2 * this._resizebarheight;\n\n        return calculatedHeight;\n    }\n\n    private previousSlidesHeight(slide: IProvenanceSlide) {\n        let myIndex = this._slideDeck.slides.indexOf(slide);\n        let calculatedHeight = 50;\n\n        for (let i = 0; i < myIndex; i++) {\n            calculatedHeight += this.barTotalHeight(this._slideDeck.slides[i]);\n        }\n\n        return calculatedHeight;\n    }\n\n    private updateTimeIndices(slideDeck: IProvenanceSlidedeck) {\n        this._timeIndexedSlides = [];\n        let timeIndex = 0;\n        slideDeck.slides.forEach(slide => {\n            this._timeIndexedSlides.push({\n                slide: slide,\n                startTime: timeIndex\n            });\n            timeIndex += slide.delay + slide.duration;\n        });\n    }\n    private onNext = () => {\n        this._slideDeck.next();\n    }\n    private onPrevious = () => {\n        this._slideDeck.previous();\n    }\n    private onPlay = () => {\n        if (this._player.status === STATUS.IDLE) {\n            this._player.play();\n        } else {\n            this._player.stop();\n        }\n\n        d3.select(d3.event.target).classed(\n            \"fa-play\",\n            d3.select(d3.event.target).classed(\"fa-play\") ? false : true\n        );\n        d3.select(d3.event.target).classed(\n            \"fa-pause\",\n            d3.select(d3.event.target).classed(\"fa-pause\") ? false : true\n        );\n    }\n\n    public update() {\n        this.updateTimeIndices(this._slideDeck);\n\n        const allExistingNodes = this._slideTable\n            .selectAll(\"g.slide\")\n            .data<any>(this._slideDeck.slides, (d: IProvenanceSlide) => {\n                return d.id;\n            });\n\n        const that = this;\n        const newNodes = allExistingNodes\n            .enter()\n            .append(\"g\")\n            .attr(\"class\", \"slide\")\n            .call(\n                (d3.drag() as any)\n                    .clickDistance([2, 2])\n                    .on(\"start\", this.moveDragStarted)\n                    .on(\"drag\", firstArgThis(this.moveDragged))\n                    .on(\"end\", firstArgThis(this.moveDragended))\n            );\n\n        newNodes\n            .append(\"rect\")\n            .attr(\"class\", \"slides_delay_resize\")\n            .attr(\"x\", this._barPadding)\n            .attr(\"width\", this._barWidth - 2 * this._barPadding)\n            .attr(\"height\", this._resizebarheight)\n            .attr(\"cursor\", \"ns-resize\")\n            .call(\n                (d3.drag() as any)\n                    .subject(firstArgThis(this.delaySubject))\n                    .on(\"drag\", firstArgThis(this.delayDragged))\n            );\n\n        newNodes\n            .append(\"rect\")\n            .attr(\"class\", \"slides_delay_rect\")\n            .attr(\"x\", this._barPadding)\n            .attr(\"y\", 0)\n            .attr(\"width\", this._barWidth - 2 * this._barPadding)\n            .on(\"click\", this.onSelect);\n\n        let slideGroup = newNodes\n            .append(\"g\")\n            .attr(\"transform\", \"translate(5,0)\")\n            .attr(\"class\", \"slide_group\")\n            .on(\"mouseenter\", this.onMouseEnter)\n            .on(\"mouseleave\", this.onMouseLeave);\n\n        slideGroup\n            .append(\"rect\")\n            .attr(\"class\", \"slides_rect\")\n            .attr(\"width\", this._barWidth - 2 * this._barPadding)\n            .attr(\"cursor\", \"move\")\n            .on(\"click\", this.onSelect);\n\n        slideGroup\n            .append(\"text\")\n            .attr(\"class\", \"slides_text\")\n            .attr(\"x\", 2 * this._barPadding)\n            .attr(\"dy\", \".35em\");\n\n        slideGroup\n            .append(\"text\")\n            .attr(\"class\", \"slides_delaytext\")\n            .attr(\"x\", 2 * this._barPadding)\n            .attr(\"dy\", \".35em\");\n        let toolbar = slideGroup.append(\"g\").attr(\"class\", \"slide_toolbar\");\n        toolbar\n            .append(\"svg:foreignObject\")\n            .attr(\"class\", \"slides_delete_icon\")\n            .attr(\"x\", this._toolbarX)\n            .attr(\"cursor\", \"pointer\")\n            .attr(\"width\", 20)\n            .attr(\"height\", 20)\n            .append(\"xhtml:body\")\n            .on(\"click\", this.onDelete)\n            .html('<i class=\"fa fa-trash-o\"></i>');\n\n        toolbar\n            .append(\"svg:foreignObject\")\n            .attr(\"class\", \"slides_clone_icon\")\n            .attr(\"x\", this._toolbarX + this._toolbarPadding)\n            .attr(\"cursor\", \"pointer\")\n            .attr(\"width\", 20)\n            .attr(\"height\", 20)\n            .append(\"xhtml:body\")\n            .on(\"click\", this.onClone)\n            .html('<i class=\"fa fa-copy\"></i>');\n\n        const slidePlaceholder = this._slideTable.select(\n            \"rect#slide_placeholder\"\n        );\n        const playerPlaceholder = this._slideTable.select(\n            \"rect#player_placeholder\"\n        );\n        newNodes\n            .append(\"text\")\n            .attr(\"class\", \"slides_durationtext\")\n            .attr(\"x\", this._barPadding - 30)\n            .attr(\"dy\", \"-.65em\");\n\n        newNodes\n            .append(\"circle\")\n            .attr(\"class\", \"time\")\n            .attr(\"cx\", 0)\n            .attr(\"r\", 3)\n            .attr(\"fill\", \"black\");\n\n        newNodes\n            .append(\"rect\")\n            .attr(\"class\", \"slides_duration_resize\")\n            .attr(\"x\", this._barPadding)\n            .attr(\"width\", this._barWidth - 2 * this._barPadding)\n            .attr(\"height\", this._resizebarheight)\n            .attr(\"cursor\", \"ns-resize\")\n            .call(\n                (d3.drag() as any)\n                    .subject(firstArgThis(this.durationSubject))\n                    .on(\"drag\", firstArgThis(this.durationDragged))\n            );\n\n        // Update all nodes\n\n        const allNodes = newNodes\n            .merge(allExistingNodes)\n            .attr(\"transform\", (slide: IProvenanceSlide) => {\n                this._previousSlideY = this.previousSlidesHeight(slide);\n                return \"translate(30,\" + this.previousSlidesHeight(slide) + \")\";\n            });\n\n        allNodes\n            .select(\"rect.slides_delay_rect\")\n            .attr(\"height\", (slide: IProvenanceSlide) => {\n                return this.barDelayHeight(slide);\n            });\n\n        allNodes\n            .select(\"rect.slides_delay_resize\")\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return this.barDelayHeight(slide);\n            });\n        slideGroup = allNodes.select(\"g.slide_group\");\n        slideGroup\n            .select(\"rect.slides_rect\")\n            .attr(\"selected\", (slide: IProvenanceSlide) => {\n                return this._slideDeck.selectedSlide === slide;\n            })\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return this.barDelayHeight(slide) + this._resizebarheight;\n            })\n            .attr(\"height\", (slide: IProvenanceSlide) => {\n                this._placeholderY =\n                    this._previousSlideY +\n                    this.barDurationHeight(slide) +\n                    this.barDelayHeight(slide) +\n                    this._resizebarheight;\n                return this.barDurationHeight(slide);\n            });\n\n        toolbar = allNodes.select(\"g.slide_toolbar\");\n        toolbar\n            .select(\"foreignObject.slides_delete_icon\")\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return (\n                    this.barDelayHeight(slide) +\n                    this._resizebarheight +\n                    2 * this._barPadding\n                );\n            });\n        toolbar\n            .select(\"foreignObject.slides_clone_icon\")\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return (\n                    this.barDelayHeight(slide) +\n                    this._resizebarheight +\n                    2 * this._barPadding\n                );\n            });\n        slideGroup\n            .select(\"text.slides_text\")\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return (\n                    this.barDelayHeight(slide) +\n                    this._resizebarheight +\n                    2 * this._barPadding\n                );\n            })\n            .text((slide: IProvenanceSlide) => {\n                return slide.name;\n            });\n\n        slideGroup\n            .select(\"text.slides_delaytext\")\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return (\n                    this.barDelayHeight(slide) +\n                    this._resizebarheight +\n                    1 * this._barPadding +\n                    25\n                );\n            })\n            .text((slide: IProvenanceSlide) => {\n                return \"transition: \" + slide.delay / 1000;\n            });\n\n        allNodes.select(\"circle.time\").attr(\"cy\", (slide: IProvenanceSlide) => {\n            return this.barDelayHeight(slide) + this._resizebarheight;\n        });\n        allNodes\n            .select(\"rect.slides_duration_resize\")\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return this.barTotalHeight(slide) - this._resizebarheight;\n            });\n        allNodes\n            .select(\"text.slides_durationtext\")\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return (\n                    this.barDelayHeight(slide) +\n                    this._resizebarheight +\n                    4 * this._barPadding -\n                    7\n                );\n            })\n            .text((slide: IProvenanceSlide) => {\n                return slide.duration / 1000;\n            });\n\n        slidePlaceholder.attr(\"y\", this._placeholderY + 20);\n        playerPlaceholder.attr(\"y\", 5);\n        this._slideTable.select(\"line\").attr(\"y2\", this._placeholderY + 20);\n        this._slideTable\n            .select(\"foreignObject.slide_add\")\n            .attr(\"y\", this._placeholderY + 26);\n        this.animate();\n        allExistingNodes.exit().remove();\n    }\n    private animate() {\n        if (this._player.status === STATUS.PLAYING) {\n            this._slideTable\n                .select(\".currentTime\")\n                .transition()\n                .ease(d3.easeLinear)\n                .duration(this._slideDuration)\n                .attr(\"cy\", this._nextSlideY)\n                .on(\"end\", () => this.isLastSlide());\n        } else {\n            this._slideTable\n                .select(\".currentTime\")\n                .transition()\n                .ease(d3.easeLinear)\n                .duration(0);\n        }\n    }\n    isLastSlide() {\n        if (this._slideDeck.selectedSlide !== null) {\n            if (\n                this._slideDeck.slides.indexOf(\n                    this._slideDeck.selectedSlide\n                ) ===\n                this._slideDeck.slides.length - 1\n            ) {\n                setTimeout(() => {\n                    this._nextSlideY = 50;\n                    this._slideTable\n                        .select(\".currentTime\")\n                        .attr(\"cy\", this._nextSlideY);\n                    this._slideDeck.selectedSlide = this._slideDeck.slides[0];\n                    this._slideTable\n                        .select(\".fa-pause\")\n                        .classed(\"fa-play\", true)\n                        .classed(\"fa-pause\", false);\n                    this._player.stop();\n                    this._player.currentSlideIndex = 0;\n                }, 2000);\n            }\n        }\n    }\n    constructor(slideDeck: IProvenanceSlidedeck, elm: HTMLDivElement) {\n        this._slideDeck = slideDeck;\n        this._root = d3.select(elm);\n        this._slideTable = this._root\n            .append<SVGElement>(\"svg\")\n            .attr(\"class\", \"slide__table\")\n            .attr(\"height\", this._tableHeight)\n            .attr(\"width\", this._tableWidth);\n        this._slideTable\n            .append(\"rect\")\n            .attr(\"class\", \"slides_background_rect\")\n            .attr(\"x\", 0)\n            .attr(\"y\", 0)\n            .attr(\"height\", this._tableHeight)\n            .attr(\"width\", this._tableWidth);\n        this._slideTable\n            .append(\"line\")\n            .attr(\"x1\", this._lineX1)\n            .attr(\"y1\", this._nextSlideY)\n            .attr(\"x2\", this._lineX1)\n            .attr(\"stroke\", \"gray\")\n            .attr(\"stroke-width\", 2);\n        this._slideTable\n            .append(\"circle\")\n            .attr(\"class\", \"currentTime\")\n            .attr(\"cx\", this._lineX1)\n            .attr(\"cy\", this._nextSlideY)\n            .attr(\"r\", 3)\n            .attr(\"fill\", \"red\");\n        this.setPlaceholder(\"slide_placeholder\");\n        this.setPlaceholder(\"player_placeholder\");\n        this.setAddButton();\n        this.setPreviousButton();\n        this.setPlayButton();\n        this.setNextButton();\n        slideDeck.on(\"slideAdded\", () => this.update());\n        slideDeck.on(\"slideRemoved\", () => this.update());\n        slideDeck.on(\"slidesMoved\", () => this.update());\n        slideDeck.on(\"slideSelected\", () => this.update());\n        this._player = new ProvenanceSlidedeckPlayer(\n            this._slideDeck.slides,\n            nextSlide => {\n                this._slideDuration = nextSlide.duration;\n                this._nextSlideY += this.barTotalHeight(nextSlide);\n                this._slideDeck.selectedSlide = nextSlide;\n            }\n        );\n\n        this.update();\n    }\n\n    private setPlaceholder(id: string) {\n        this._slideTable\n            .append(\"rect\")\n            .attr(\"id\", id)\n            .attr(\"class\", \"slides_placeholder\")\n            .attr(\"x\", this._lineX1 + this._barPadding)\n            .attr(\"y\", 0)\n            .attr(\"width\", this._placeholderWidth)\n            .attr(\"height\", this._placeholderHeight);\n    }\n    private setAddButton() {\n        this._slideTable\n            .append(\"svg:foreignObject\")\n            .attr(\"class\", \"slide_add\")\n            .attr(\"x\", (this._tableWidth - 40) / 2)\n            .attr(\"cursor\", \"pointer\")\n            .attr(\"width\", 30)\n            .attr(\"height\", 30)\n            .append(\"xhtml:body\")\n            .on(\"click\", this.onAdd)\n            .html('<i class=\"fa fa-file-text-o\"></i>');\n    }\n    private setPlayButton() {\n        this._slideTable\n            .append(\"svg:foreignObject\")\n            .attr(\"id\", \"slide_play\")\n            .attr(\"x\", (this._tableWidth - 40) / 2 + 30)\n            .attr(\"y\", 10)\n            .attr(\"cursor\", \"pointer\")\n            .attr(\"width\", 30)\n            .attr(\"height\", 30)\n            .append(\"xhtml:body\")\n            .on(\"click\", this.onPlay)\n            .html('<i class=\"fa fa-play\"></i>');\n    }\n    private setNextButton() {\n        this._slideTable\n            .append(\"svg:foreignObject\")\n            .attr(\"x\", (this._tableWidth - 40) / 2 + 60)\n            .attr(\"y\", 10)\n            .attr(\"cursor\", \"pointer\")\n            .attr(\"width\", 30)\n            .attr(\"height\", 30)\n            .append(\"xhtml:body\")\n            .on(\"click\", this.onNext)\n            .html('<i class=\"fa fa-forward\"></i>');\n    }\n    private setPreviousButton() {\n        this._slideTable\n            .append(\"svg:foreignObject\")\n            .attr(\"x\", (this._tableWidth - 40) / 2 - 10)\n            .attr(\"y\", 10)\n            .attr(\"cursor\", \"pointer\")\n            .attr(\"width\", 30)\n            .attr(\"height\", 30)\n            .append(\"xhtml:body\")\n            .on(\"click\", this.onPrevious)\n            .html('<i class=\"fa fa-backward\"></i>');\n    }\n}\n"],"names":["d3.event","d3.select","d3.drag","d3.easeLinear"],"mappings":"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"}