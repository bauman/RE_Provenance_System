{"version":3,"file":"slide-deck-visualization.es5.js","sources":["../../provenance-core/src/utils.ts","../../provenance-core/src/mitt.ts","../../provenance-core/src/ProvenanceGraph.ts","../../provenance-core/src/ProvenanceSlide.ts","../../provenance-core/src/ProvenanceSlidedeck.ts","../../provenance-core/src/ProvenanceSlidedeckPlayer.ts","../src/slide-deck-visualization.ts"],"sourcesContent":["import { ProvenanceNode, StateNode, Action, ReversibleAction } from './api';\n\nexport function generateUUID(): string {\n  // Public Domain/MIT\n  let d = new Date().getTime();\n  if (\n    typeof performance !== 'undefined' &&\n    typeof performance.now === 'function'\n  ) {\n    d += performance.now(); // use high-precision timer if available\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    let r = ((d + Math.random() * 16) % 16) | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\n/**\n * Generate a Unix timestamp in milliseconds\n *\n * @returns {number} in milliseconds\n */\nexport function generateTimestamp(): number {\n  // Removed, because performance.now() returns a floating point number, which is not compatible with the Date.getTime() integer\n  // if (\n  //   window.performance &&\n  //   window.performance.now &&\n  //   window.performance.timing &&\n  //   window.performance.timing.navigationStart\n  // ) {\n  //   return window.performance.now();\n  // }\n  return new Date().getTime();\n}\n\nexport function isStateNode(node: ProvenanceNode): node is StateNode {\n  return 'parent' in node;\n}\n\nexport function isReversibleAction(action: Action): action is ReversibleAction {\n  return 'undo' in action;\n}\n","import { Handler } from './api';\n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\n\nexport default function mitt(all?: any) {\n  all = all || Object.create(null);\n\n  return {\n    /**\n     * Register an event handler for the given type.\n     *\n     * @param  {String} type\tType of event to listen for\n     * @param  {Function} handler Function to call in response to given event\n     * @memberOf mitt\n     */\n    on(type: string, handler: Handler) {\n      (all[type] || (all[type] = [])).push(handler);\n    },\n\n    /**\n     * Remove an event handler for the given type.\n     *\n     * @param  {String} type\tType of event to unregister `handler` from\n     * @param  {Function} handler Handler function to remove\n     * @memberOf mitt\n     */\n    off(type: string, handler: Handler) {\n      if (all[type]) {\n        all[type].splice(all[type].indexOf(handler) >>> 0, 1);\n      }\n    },\n\n    /**\n     * Invoke all handlers for the given type.\n     *\n     * @param {String} type  The event type to invoke\n     * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n     * @memberOf mitt\n     */\n    emit(type: string, evt: any) {\n      (all[type] || []).slice().map((handler: Handler) => {\n        handler(evt);\n      });\n    }\n  };\n}\n","import {\n  Application,\n  Handler,\n  IProvenanceGraph,\n  NodeIdentifier,\n  ProvenanceNode,\n  RootNode,\n  SerializedProvenanceGraph,\n  SerializedProvenanceNode,\n  SerializedStateNode\n} from './api';\nimport { generateTimestamp, generateUUID, isStateNode } from './utils';\nimport mitt from './mitt';\n\n/**\n * Provenance Graph implementation\n *\n * @param version The version of the software to track the provenance of\n *\n */\nexport class ProvenanceGraph implements IProvenanceGraph {\n  public application: Application;\n  public readonly root: RootNode;\n  private _current: ProvenanceNode;\n  private _mitt: any;\n  private _nodes: { [key: string]: ProvenanceNode } = {};\n\n  constructor(application: Application, userid: string = 'Unknown', rootNode?: RootNode) {\n    this._mitt = mitt();\n    this.application = application;\n\n    if (rootNode) {\n      this.root = rootNode;\n    } else {\n      this.root = {\n        id: generateUUID(),\n        label: 'Root',\n        metadata: {\n          createdBy: userid,\n          createdOn: generateTimestamp()\n        },\n        children: [],\n        artifacts: {}\n      } as RootNode;\n    }\n    this.addNode(this.root);\n    this._current = this.root;\n  }\n\n  addNode(node: ProvenanceNode): void {\n    if (this._nodes[node.id]) {\n      throw new Error('Node already added');\n    }\n    this._nodes[node.id] = node;\n    this._mitt.emit('nodeAdded', node);\n  }\n\n  getNode(id: NodeIdentifier): ProvenanceNode {\n    const result = this._nodes[id];\n    if (!result) {\n      throw new Error('Node id not found');\n    }\n    return this._nodes[id];\n  }\n\n  get current(): ProvenanceNode {\n    return this._current;\n  }\n\n  set current(node: ProvenanceNode) {\n    if (!this._nodes[node.id]) {\n      throw new Error('Node id not found');\n    }\n    this._current = node;\n    this._mitt.emit('currentChanged', node);\n  }\n\n  get nodes() {\n    return this._nodes;\n  }\n\n  emitNodeChangedEvent(node: ProvenanceNode) {\n    /* istanbul ignore if */\n    if (!this._nodes[node.id]) {\n      throw new Error('Node id not found');\n    }\n    this._mitt.emit('nodeChanged', node);\n  }\n\n  on(type: string, handler: Handler) {\n    this._mitt.on(type, handler);\n  }\n\n  off(type: string, handler: Handler) {\n    this._mitt.off(type, handler);\n  }\n}\n\n/* Beware that deeply nested properties in serializedProvenanceGraph is mutated in the process */\nexport function restoreProvenanceGraph(\n  serializedProvenanceGraph: SerializedProvenanceGraph\n): ProvenanceGraph {\n  const nodes: { [key: string]: any } = {};\n\n  // restore nodes as key value\n  for (let node of serializedProvenanceGraph.nodes) {\n    nodes[node.id] = { ...node };\n  }\n\n  // restore parent/children relations\n  for (let nodeId of Object.keys(nodes)) {\n    const node = nodes[nodeId];\n    node.children = node.children.map((id: string) => nodes[id]);\n    if ('parent' in node) {\n      node.parent = nodes[node.parent];\n    }\n  }\n\n  const graph = new ProvenanceGraph(serializedProvenanceGraph.application);\n  (graph as any)._nodes = nodes;\n  (graph as any)._current = nodes[serializedProvenanceGraph.current];\n  (graph as any).root = nodes[serializedProvenanceGraph.root];\n\n  return graph;\n}\n\nexport function serializeProvenanceGraph(graph: ProvenanceGraph): SerializedProvenanceGraph {\n  const nodes = Object.keys(graph.nodes).map(nodeId => {\n    const node = graph.getNode(nodeId);\n    const serializedNode: SerializedProvenanceNode = { ...node } as any;\n    if (isStateNode(node)) {\n      (serializedNode as SerializedStateNode).parent = node.parent.id;\n    }\n    serializedNode.children = node.children.map(child => child.id);\n    return serializedNode;\n  });\n\n  return {\n    nodes,\n    root: graph.root.id,\n    application: graph.application,\n    current: graph.current.id\n  };\n}\n","import { IProvenanceSlide, Annotation, ProvenanceNode } from './api';\nimport { generateUUID } from './utils';\n\nexport class ProvenanceSlide implements IProvenanceSlide {\n  private _id: string;\n  private _node: ProvenanceNode | null;\n  private _name: string;\n  private _duration: number;\n  private _delay: number;\n  private _annotations: Annotation[];\n\n  constructor(\n    name: string,\n    duration: number,\n    delay: number,\n    annotations: Annotation[] = [],\n    node: ProvenanceNode | null = null\n  ) {\n    this._id = generateUUID();\n    this._name = name;\n    this._duration = duration;\n    this._delay = delay;\n    this._annotations = annotations;\n    this._node = node;\n  }\n\n  public get id(): string {\n    return this._id;\n  }\n\n  public get node(): ProvenanceNode | null {\n    return this._node;\n  }\n\n  public set node(value: ProvenanceNode | null) {\n    this._node = value;\n  }\n\n  public get name(): string {\n    return this._name;\n  }\n\n  public set name(value: string) {\n    this._name = value;\n  }\n\n  public get duration(): number {\n    return this._duration;\n  }\n\n  public set duration(value: number) {\n    this._duration = value;\n  }\n\n  public get delay(): number {\n    return this._delay;\n  }\n\n  public set delay(value: number) {\n    this._delay = value;\n  }\n\n  public addAnnotation(annotation: Annotation) {\n    this._annotations.push(annotation);\n  }\n\n  public removeAnnotation(annotation: Annotation) {\n    const index = this._annotations.indexOf(annotation);\n    this._annotations.splice(index, 1);\n  }\n\n  public get annotations() {\n    return this._annotations;\n  }\n}\n","import mitt from \"./mitt\";\nimport {\n  IProvenanceSlidedeck,\n  IProvenanceGraphTraverser,\n  IProvenanceGraph,\n  Application,\n  Handler,\n  IProvenanceSlide\n} from \"./api\";\nimport { ProvenanceSlide } from \"./ProvenanceSlide\";\n\nexport class ProvenanceSlidedeck implements IProvenanceSlidedeck {\n  private _application: Application;\n  private _graph: IProvenanceGraph;\n  private _mitt: any;\n  private _slides: IProvenanceSlide[] = [];\n  private _traverser: IProvenanceGraphTraverser;\n  private _selectedSlide: IProvenanceSlide | null;\n\n  private _captainPlaceholder = new ProvenanceSlide(\"Captain Placeholder\", 0, 0);\n\n  constructor(application: Application, traverser: IProvenanceGraphTraverser) {\n    this._mitt = mitt();\n    this._application = application;\n    this._graph = traverser.graph;\n    this._traverser = traverser;\n\n    this._selectedSlide = null;\n  }\n\n  public get application() {\n    return this._application;\n  }\n\n  public addSlide(slide?: IProvenanceSlide, index?: number): IProvenanceSlide {\n    if (\n      !index ||\n      isNaN(index) ||\n      !Number.isInteger(index) ||\n      index > this._slides.length ||\n      index < 0\n    ) {\n      index = this._slides.length;\n    }\n    if (slide && this._slides.indexOf(slide) >= 0) {\n      throw new Error(\"Cannot add a slide that is already in the deck\");\n    }\n    if (!slide) {\n      const node = this._graph.current;\n      slide = new ProvenanceSlide(node.label, 1, 0, [], node);\n    }\n    if (this._slides.length === 0) {\n      this._selectedSlide = slide;\n    }\n    this._slides.splice(index, 0, slide);\n    this._mitt.emit(\"slideAdded\", slide);\n\n    return slide;\n  }\n\n  public removeSlideAtIndex(index: number) {\n    let deletedSlides = this._slides.splice(index, 1);\n\n    // This can only be 1 slide now, therefore this is ok.\n    if (this._selectedSlide === deletedSlides[0]) {\n      this.selectedSlide = null;\n    }\n    this._mitt.emit(\"slideRemoved\", deletedSlides[0]);\n  }\n\n  public removeSlide(slide: IProvenanceSlide) {\n    this.removeSlideAtIndex(this._slides.indexOf(slide));\n  }\n\n  public get selectedSlide(): IProvenanceSlide | null {\n    return this._selectedSlide;\n  }\n\n  public moveSlide(indexFrom: number, indexTo: number) {\n    if (indexTo < 0 || indexTo > this.slides.length - 1) {\n      throw new Error(\"target index out of bounds\");\n    }\n\n    if (indexTo >= this._slides.length) {\n      let k = indexTo - this._slides.length + 1;\n      while (k--) {\n        this._slides.push(this._captainPlaceholder);\n      }\n    }\n    this._slides.splice(indexTo, 0, this._slides.splice(indexFrom, 1)[0]);\n\n    this._mitt.emit(\"slidesMoved\", this._slides);\n  }\n\n  public startTime(slide: IProvenanceSlide) {\n    const index = this._slides.indexOf(slide);\n    let previousTime = 0;\n    for (let i = 0; i < index; i++) {\n      previousTime += this._slides[i].delay;\n      previousTime += this._slides[i].duration;\n    }\n    return previousTime;\n  }\n\n  public slideAtTime(time: number) {\n    let index = 0;\n    let currentSlide = null;\n\n    while (time >= 0 && index < this.slides.length) {\n      currentSlide = this.slides[index];\n      let nextSlideOffset = currentSlide.delay + currentSlide.duration;\n\n      if (time - nextSlideOffset < 0) {\n        break;\n      }\n\n      time -= nextSlideOffset;\n      index++;\n    }\n\n    return currentSlide;\n  }\n\n  public set selectedSlide(slide: IProvenanceSlide | null) {\n    if (slide && slide.node) {\n      this._traverser.toStateNode(slide.node.id);\n    }\n    this._selectedSlide = slide;\n    this._mitt.emit(\"slideSelected\", slide);\n  }\n\n  public get slides() {\n    return this._slides;\n  }\n\n  next() {\n    if (this._selectedSlide !== null) {\n      let currentIndex = this._slides.indexOf(this._selectedSlide);\n      if (currentIndex < this._slides.length - 1) {\n        currentIndex += 1;\n        this.selectedSlide = this._slides[currentIndex];\n      } else this.selectedSlide = this._slides[0];\n    }\n  }\n  previous() {\n    if (this._selectedSlide !== null) {\n      let currentIndex = this._slides.indexOf(this._selectedSlide);\n      if (currentIndex > 0) {\n        currentIndex -= 1;\n        this.selectedSlide = this._slides[currentIndex];\n      } else {\n        this.selectedSlide = this._slides[this._slides.length - 1];\n      }\n    }\n  }\n\n  public get graph() {\n    return this._graph;\n  }\n\n  on(type: string, handler: Handler) {\n    this._mitt.on(type, handler);\n  }\n\n  off(type: string, handler: Handler) {\n    this._mitt.off(type, handler);\n  }\n}\n","export interface ISlide {\n  duration: number;\n  delay: number;\n}\n\nexport enum STATUS {\n  IDLE,\n  PLAYING\n}\n\nconst wait = (duration: number) => new Promise(resolve => setTimeout(resolve, duration));\n\nexport class ProvenanceSlidedeckPlayer<T extends ISlide> {\n  private readonly _selectCallback: (slide: T) => any;\n  private readonly _slides: T[];\n  private _currentSlideIndex: number;\n  private _status: STATUS;\n\n  constructor(slides: T[], selectCallback: (slide: T) => any) {\n    this._selectCallback = selectCallback;\n    this._slides = slides;\n    this._currentSlideIndex = 0;\n    this._status = STATUS.IDLE;\n  }\n\n  public setSlideIndex(slideIndex: number) {\n    this._currentSlideIndex = slideIndex;\n  }\n\n  public get slides() {\n    return this._slides;\n  }\n\n  public get currentSlideIndex() {\n    return this._currentSlideIndex;\n  }\n  public set currentSlideIndex(index: number) {\n    this._currentSlideIndex = index;\n  }\n  public async play() {\n    const shouldPlayNext = () =>\n      this._status === STATUS.PLAYING && this._currentSlideIndex < this._slides.length - 1;\n\n    if (this._status === STATUS.IDLE) {\n      this._status = STATUS.PLAYING;\n      this._selectCallback(this._slides[this._currentSlideIndex]);\n      do {\n        const slide = this._slides[this._currentSlideIndex];\n        await wait(slide.duration);\n        if (shouldPlayNext()) {\n          this._currentSlideIndex += 1;\n          this._selectCallback(this._slides[this._currentSlideIndex]);\n        }\n      } while (shouldPlayNext());\n    }\n    this._status = STATUS.IDLE;\n  }\n  public next() {\n    this._currentSlideIndex += 1;\n    this._selectCallback(this._slides[this._currentSlideIndex]);\n  }\n  public get status() {\n    return this._status;\n  }\n\n  public stop() {\n    this._status = STATUS.IDLE;\n  }\n}\n","import * as d3 from \"d3\";\n\nimport \"./style.css\";\n\nimport {\n    IProvenanceSlide,\n    ProvenanceSlide,\n    IProvenanceSlidedeck,\n    ProvenanceSlidedeckPlayer,\n    STATUS\n} from \"@visualstorytelling/provenance-core\";\nimport { all } from \"q\";\nimport { Stats } from \"fs\";\n\nfunction firstArgThis(f: (...args: any[]) => any) {\n    return function(this: any, ...args: any[]) {\n        return f(this, ...args);\n    };\n}\n\ntype IndexedSlide = { slide: IProvenanceSlide; startTime: number };\n\nexport class SlideDeckVisualization {\n    private _slideDeck: IProvenanceSlidedeck;\n    private _root: d3.Selection<HTMLDivElement, any, null, undefined>;\n    private _slideTable: d3.Selection<SVGElement, any, null, undefined>;\n    private _tableHeight = 1000;\n    private _tableWidth = 300;\n    private _minimumSlideDuration = 5000;\n    private _barHeightTimeMultiplier = 0.01;\n    private _barWidth = 270;\n    private _barPadding = 5;\n    private _resizebarheight = 5;\n    private _previousSlideY = 0;\n    private _lineX1 = 30;\n    private _placeholderWidth = this._tableWidth - 40;\n    private _placeholderY = 50;\n    private _placeholderHeight = 30;\n    private _maxSlides = 20;\n    private _toolbarX = 200;\n    private _toolbarY = 10;\n    private _toolbarPadding = 20;\n    private _slideDuration = 1000;\n    private _timeIndexedSlides: IndexedSlide[] = [];\n    private _player: ProvenanceSlidedeckPlayer<IProvenanceSlide>;\n    private _nextSlideY = 50;\n    private _index = (slide: IProvenanceSlide): number => {\n        return this._slideDeck.slides.indexOf(slide);\n    }\n\n    private onDelete = (slide: IProvenanceSlide) => {\n        this._slideDeck.removeSlide(slide);\n    }\n\n    private onSelect = (slide: IProvenanceSlide) => {\n        if (d3.event.defaultPrevented) return;\n\n        this._slideDeck.selectedSlide = slide;\n    }\n\n    private onMouseEnter() {\n        let toolbar = d3.event.target.parentElement.querySelector(\n            \".slide_toolbar\"\n        );\n        toolbar.style.display = \"block\";\n    }\n    private onMouseLeave() {\n        let toolbar = d3.event.target.parentElement.querySelector(\n            \".slide_toolbar\"\n        );\n        toolbar.style.display = \"none\";\n    }\n\n    private onAdd = () => {\n        let slideDeck = this._slideDeck;\n        const node = slideDeck.graph.current;\n        const slide = new ProvenanceSlide(node.label, 1000, 0, [], node);\n        slideDeck.addSlide(\n            slide,\n            slideDeck.selectedSlide\n                ? slideDeck.slides.indexOf(slideDeck.selectedSlide) + 1\n                : slideDeck.slides.length\n        );\n    }\n    private onClone = (slide: IProvenanceSlide) => {\n        let slideDeck = this._slideDeck;\n        const cloneSlide = new ProvenanceSlide(\n            slide.name,\n            1000,\n            0,\n            [],\n            slide.node\n        );\n        slideDeck.addSlide(\n            cloneSlide,\n            slideDeck.selectedSlide\n                ? slideDeck.slides.indexOf(slideDeck.selectedSlide) + 1\n                : slideDeck.slides.length\n        );\n    }\n\n    private moveDragStarted(draggedObject: any) {\n        d3.select<any, any>(this)\n            .raise()\n            .classed(\"active\", true);\n    }\n\n    private moveDragged = (that: any, draggedObject: any) => {\n        d3.select<any, any>(that).attr(\n            \"transform\",\n            (slide: IProvenanceSlide) => {\n                const originalY = this.previousSlidesHeight(slide);\n                const draggedY = d3.event.y;\n                const myIndex = this._slideDeck.slides.indexOf(slide);\n\n                if (draggedY < originalY && myIndex > 0) {\n                    // check upwards\n                    const previousSlide = this._slideDeck.slides[myIndex - 1];\n                    let previousSlideCenterY =\n                        this.previousSlidesHeight(previousSlide) +\n                        this.barTotalHeight(previousSlide) / 2;\n\n                    if (draggedY < previousSlideCenterY) {\n                        this._slideDeck.moveSlide(myIndex, myIndex - 1);\n                    }\n                } else if (\n                    draggedY > originalY &&\n                    myIndex < this._slideDeck.slides.length - 1\n                ) {\n                    // check downwards\n                    const nextSlide = this._slideDeck.slides[myIndex + 1];\n                    let nextSlideCenterY =\n                        this.previousSlidesHeight(nextSlide) +\n                        this.barTotalHeight(nextSlide) / 2;\n\n                    if (draggedY > nextSlideCenterY) {\n                        this._slideDeck.moveSlide(myIndex, myIndex + 1);\n                    }\n                }\n\n                return \"translate(30,\" + d3.event.y + \")\";\n            }\n        );\n    }\n\n    private moveDragended = (that: any, draggedObject: any) => {\n        d3.select<any, any>(that)\n            .classed(\"active\", false)\n            .attr(\"transform\", (slide: IProvenanceSlide) => {\n                return \"translate(30,\" + this.previousSlidesHeight(slide) + \")\";\n            });\n    }\n\n    private delayDragged = (that: any, slide: IProvenanceSlide) => {\n        slide.delay = Math.max(0, d3.event.y) / this._barHeightTimeMultiplier;\n        this.update();\n    }\n\n    private delaySubject = (that: any, slide: IProvenanceSlide) => {\n        return { y: this.barDelayHeight(slide) };\n    }\n\n    private durationDragged = (that: any, slide: IProvenanceSlide) => {\n        slide.duration =\n            Math.max(0, d3.event.y) / this._barHeightTimeMultiplier;\n        this.update();\n    }\n\n    private durationSubject = (that: any, slide: IProvenanceSlide) => {\n        return { y: this.barDurationHeight(slide) };\n    }\n\n    private barDelayHeight(slide: IProvenanceSlide) {\n        let calculatedHeight = this._barHeightTimeMultiplier * slide.delay;\n        return Math.max(calculatedHeight, 0);\n    }\n\n    private barDurationHeight(slide: IProvenanceSlide) {\n        let calculatedHeight = this._barHeightTimeMultiplier * slide.duration;\n        return Math.max(\n            calculatedHeight,\n            this._minimumSlideDuration * this._barHeightTimeMultiplier\n        );\n    }\n\n    private barTotalHeight(slide: IProvenanceSlide) {\n        let calculatedHeight =\n            this.barDelayHeight(slide) +\n            this.barDurationHeight(slide) +\n            2 * this._resizebarheight;\n\n        return calculatedHeight;\n    }\n\n    private previousSlidesHeight(slide: IProvenanceSlide) {\n        let myIndex = this._slideDeck.slides.indexOf(slide);\n        let calculatedHeight = 50;\n\n        for (let i = 0; i < myIndex; i++) {\n            calculatedHeight += this.barTotalHeight(this._slideDeck.slides[i]);\n        }\n\n        return calculatedHeight;\n    }\n\n    private updateTimeIndices(slideDeck: IProvenanceSlidedeck) {\n        this._timeIndexedSlides = [];\n        let timeIndex = 0;\n        slideDeck.slides.forEach(slide => {\n            this._timeIndexedSlides.push({\n                slide: slide,\n                startTime: timeIndex\n            });\n            timeIndex += slide.delay + slide.duration;\n        });\n    }\n    private onNext = () => {\n        this._slideDeck.next();\n    }\n    private onPrevious = () => {\n        this._slideDeck.previous();\n    }\n    private onPlay = () => {\n        if (this._player.status === STATUS.IDLE) {\n            this._player.play();\n        } else {\n            this._player.stop();\n        }\n\n        d3.select(d3.event.target).classed(\n            \"fa-play\",\n            d3.select(d3.event.target).classed(\"fa-play\") ? false : true\n        );\n        d3.select(d3.event.target).classed(\n            \"fa-pause\",\n            d3.select(d3.event.target).classed(\"fa-pause\") ? false : true\n        );\n    }\n\n    public update() {\n        this.updateTimeIndices(this._slideDeck);\n\n        const allExistingNodes = this._slideTable\n            .selectAll(\"g.slide\")\n            .data<any>(this._slideDeck.slides, (d: IProvenanceSlide) => {\n                return d.id;\n            });\n\n        const that = this;\n        const newNodes = allExistingNodes\n            .enter()\n            .append(\"g\")\n            .attr(\"class\", \"slide\")\n            .call(\n                (d3.drag() as any)\n                    .clickDistance([2, 2])\n                    .on(\"start\", this.moveDragStarted)\n                    .on(\"drag\", firstArgThis(this.moveDragged))\n                    .on(\"end\", firstArgThis(this.moveDragended))\n            );\n\n        newNodes\n            .append(\"rect\")\n            .attr(\"class\", \"slides_delay_resize\")\n            .attr(\"x\", this._barPadding)\n            .attr(\"width\", this._barWidth - 2 * this._barPadding)\n            .attr(\"height\", this._resizebarheight)\n            .attr(\"cursor\", \"ns-resize\")\n            .call(\n                (d3.drag() as any)\n                    .subject(firstArgThis(this.delaySubject))\n                    .on(\"drag\", firstArgThis(this.delayDragged))\n            );\n\n        newNodes\n            .append(\"rect\")\n            .attr(\"class\", \"slides_delay_rect\")\n            .attr(\"x\", this._barPadding)\n            .attr(\"y\", 0)\n            .attr(\"width\", this._barWidth - 2 * this._barPadding)\n            .on(\"click\", this.onSelect);\n\n        let slideGroup = newNodes\n            .append(\"g\")\n            .attr(\"transform\", \"translate(5,0)\")\n            .attr(\"class\", \"slide_group\")\n            .on(\"mouseenter\", this.onMouseEnter)\n            .on(\"mouseleave\", this.onMouseLeave);\n\n        slideGroup\n            .append(\"rect\")\n            .attr(\"class\", \"slides_rect\")\n            .attr(\"width\", this._barWidth - 2 * this._barPadding)\n            .attr(\"cursor\", \"move\")\n            .on(\"click\", this.onSelect);\n\n        slideGroup\n            .append(\"text\")\n            .attr(\"class\", \"slides_text\")\n            .attr(\"x\", 2 * this._barPadding)\n            .attr(\"dy\", \".35em\");\n\n        slideGroup\n            .append(\"text\")\n            .attr(\"class\", \"slides_delaytext\")\n            .attr(\"x\", 2 * this._barPadding)\n            .attr(\"dy\", \".35em\");\n        let toolbar = slideGroup.append(\"g\").attr(\"class\", \"slide_toolbar\");\n        toolbar\n            .append(\"svg:foreignObject\")\n            .attr(\"class\", \"slides_delete_icon\")\n            .attr(\"x\", this._toolbarX)\n            .attr(\"cursor\", \"pointer\")\n            .attr(\"width\", 20)\n            .attr(\"height\", 20)\n            .append(\"xhtml:body\")\n            .on(\"click\", this.onDelete)\n            .html('<i class=\"fa fa-trash-o\"></i>');\n\n        toolbar\n            .append(\"svg:foreignObject\")\n            .attr(\"class\", \"slides_clone_icon\")\n            .attr(\"x\", this._toolbarX + this._toolbarPadding)\n            .attr(\"cursor\", \"pointer\")\n            .attr(\"width\", 20)\n            .attr(\"height\", 20)\n            .append(\"xhtml:body\")\n            .on(\"click\", this.onClone)\n            .html('<i class=\"fa fa-copy\"></i>');\n\n        const slidePlaceholder = this._slideTable.select(\n            \"rect#slide_placeholder\"\n        );\n        const playerPlaceholder = this._slideTable.select(\n            \"rect#player_placeholder\"\n        );\n        newNodes\n            .append(\"text\")\n            .attr(\"class\", \"slides_durationtext\")\n            .attr(\"x\", this._barPadding - 30)\n            .attr(\"dy\", \"-.65em\");\n\n        newNodes\n            .append(\"circle\")\n            .attr(\"class\", \"time\")\n            .attr(\"cx\", 0)\n            .attr(\"r\", 3)\n            .attr(\"fill\", \"black\");\n\n        newNodes\n            .append(\"rect\")\n            .attr(\"class\", \"slides_duration_resize\")\n            .attr(\"x\", this._barPadding)\n            .attr(\"width\", this._barWidth - 2 * this._barPadding)\n            .attr(\"height\", this._resizebarheight)\n            .attr(\"cursor\", \"ns-resize\")\n            .call(\n                (d3.drag() as any)\n                    .subject(firstArgThis(this.durationSubject))\n                    .on(\"drag\", firstArgThis(this.durationDragged))\n            );\n\n        // Update all nodes\n\n        const allNodes = newNodes\n            .merge(allExistingNodes)\n            .attr(\"transform\", (slide: IProvenanceSlide) => {\n                this._previousSlideY = this.previousSlidesHeight(slide);\n                return \"translate(30,\" + this.previousSlidesHeight(slide) + \")\";\n            });\n\n        allNodes\n            .select(\"rect.slides_delay_rect\")\n            .attr(\"height\", (slide: IProvenanceSlide) => {\n                return this.barDelayHeight(slide);\n            });\n\n        allNodes\n            .select(\"rect.slides_delay_resize\")\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return this.barDelayHeight(slide);\n            });\n        slideGroup = allNodes.select(\"g.slide_group\");\n        slideGroup\n            .select(\"rect.slides_rect\")\n            .attr(\"selected\", (slide: IProvenanceSlide) => {\n                return this._slideDeck.selectedSlide === slide;\n            })\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return this.barDelayHeight(slide) + this._resizebarheight;\n            })\n            .attr(\"height\", (slide: IProvenanceSlide) => {\n                this._placeholderY =\n                    this._previousSlideY +\n                    this.barDurationHeight(slide) +\n                    this.barDelayHeight(slide) +\n                    this._resizebarheight;\n                return this.barDurationHeight(slide);\n            });\n\n        toolbar = allNodes.select(\"g.slide_toolbar\");\n        toolbar\n            .select(\"foreignObject.slides_delete_icon\")\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return (\n                    this.barDelayHeight(slide) +\n                    this._resizebarheight +\n                    2 * this._barPadding\n                );\n            });\n        toolbar\n            .select(\"foreignObject.slides_clone_icon\")\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return (\n                    this.barDelayHeight(slide) +\n                    this._resizebarheight +\n                    2 * this._barPadding\n                );\n            });\n        slideGroup\n            .select(\"text.slides_text\")\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return (\n                    this.barDelayHeight(slide) +\n                    this._resizebarheight +\n                    2 * this._barPadding\n                );\n            })\n            .text((slide: IProvenanceSlide) => {\n                return slide.name;\n            });\n\n        slideGroup\n            .select(\"text.slides_delaytext\")\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return (\n                    this.barDelayHeight(slide) +\n                    this._resizebarheight +\n                    1 * this._barPadding +\n                    25\n                );\n            })\n            .text((slide: IProvenanceSlide) => {\n                return \"transition: \" + slide.delay / 1000;\n            });\n\n        allNodes.select(\"circle.time\").attr(\"cy\", (slide: IProvenanceSlide) => {\n            return this.barDelayHeight(slide) + this._resizebarheight;\n        });\n        allNodes\n            .select(\"rect.slides_duration_resize\")\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return this.barTotalHeight(slide) - this._resizebarheight;\n            });\n        allNodes\n            .select(\"text.slides_durationtext\")\n            .attr(\"y\", (slide: IProvenanceSlide) => {\n                return (\n                    this.barDelayHeight(slide) +\n                    this._resizebarheight +\n                    4 * this._barPadding -\n                    7\n                );\n            })\n            .text((slide: IProvenanceSlide) => {\n                return slide.duration / 1000;\n            });\n\n        slidePlaceholder.attr(\"y\", this._placeholderY + 20);\n        playerPlaceholder.attr(\"y\", 5);\n        this._slideTable.select(\"line\").attr(\"y2\", this._placeholderY + 20);\n        this._slideTable\n            .select(\"foreignObject.slide_add\")\n            .attr(\"y\", this._placeholderY + 26);\n        this.animate();\n        allExistingNodes.exit().remove();\n    }\n    private animate() {\n        if (this._player.status === STATUS.PLAYING) {\n            this._slideTable\n                .select(\".currentTime\")\n                .transition()\n                .ease(d3.easeLinear)\n                .duration(this._slideDuration)\n                .attr(\"cy\", this._nextSlideY)\n                .on(\"end\", () => this.isLastSlide());\n        } else {\n            this._slideTable\n                .select(\".currentTime\")\n                .transition()\n                .ease(d3.easeLinear)\n                .duration(0);\n        }\n    }\n    isLastSlide() {\n        if (this._slideDeck.selectedSlide !== null) {\n            if (\n                this._slideDeck.slides.indexOf(\n                    this._slideDeck.selectedSlide\n                ) ===\n                this._slideDeck.slides.length - 1\n            ) {\n                setTimeout(() => {\n                    this._nextSlideY = 50;\n                    this._slideTable\n                        .select(\".currentTime\")\n                        .attr(\"cy\", this._nextSlideY);\n                    this._slideDeck.selectedSlide = this._slideDeck.slides[0];\n                    this._slideTable\n                        .select(\".fa-pause\")\n                        .classed(\"fa-play\", true)\n                        .classed(\"fa-pause\", false);\n                    this._player.stop();\n                    this._player.currentSlideIndex = 0;\n                }, 2000);\n            }\n        }\n    }\n    constructor(slideDeck: IProvenanceSlidedeck, elm: HTMLDivElement) {\n        this._slideDeck = slideDeck;\n        this._root = d3.select(elm);\n        this._slideTable = this._root\n            .append<SVGElement>(\"svg\")\n            .attr(\"class\", \"slide__table\")\n            .attr(\"height\", this._tableHeight)\n            .attr(\"width\", this._tableWidth);\n        this._slideTable\n            .append(\"rect\")\n            .attr(\"class\", \"slides_background_rect\")\n            .attr(\"x\", 0)\n            .attr(\"y\", 0)\n            .attr(\"height\", this._tableHeight)\n            .attr(\"width\", this._tableWidth);\n        this._slideTable\n            .append(\"line\")\n            .attr(\"x1\", this._lineX1)\n            .attr(\"y1\", this._nextSlideY)\n            .attr(\"x2\", this._lineX1)\n            .attr(\"stroke\", \"gray\")\n            .attr(\"stroke-width\", 2);\n        this._slideTable\n            .append(\"circle\")\n            .attr(\"class\", \"currentTime\")\n            .attr(\"cx\", this._lineX1)\n            .attr(\"cy\", this._nextSlideY)\n            .attr(\"r\", 3)\n            .attr(\"fill\", \"red\");\n        this.setPlaceholder(\"slide_placeholder\");\n        this.setPlaceholder(\"player_placeholder\");\n        this.setAddButton();\n        this.setPreviousButton();\n        this.setPlayButton();\n        this.setNextButton();\n        slideDeck.on(\"slideAdded\", () => this.update());\n        slideDeck.on(\"slideRemoved\", () => this.update());\n        slideDeck.on(\"slidesMoved\", () => this.update());\n        slideDeck.on(\"slideSelected\", () => this.update());\n        this._player = new ProvenanceSlidedeckPlayer(\n            this._slideDeck.slides,\n            nextSlide => {\n                this._slideDuration = nextSlide.duration;\n                this._nextSlideY += this.barTotalHeight(nextSlide);\n                this._slideDeck.selectedSlide = nextSlide;\n            }\n        );\n\n        this.update();\n    }\n\n    private setPlaceholder(id: string) {\n        this._slideTable\n            .append(\"rect\")\n            .attr(\"id\", id)\n            .attr(\"class\", \"slides_placeholder\")\n            .attr(\"x\", this._lineX1 + this._barPadding)\n            .attr(\"y\", 0)\n            .attr(\"width\", this._placeholderWidth)\n            .attr(\"height\", this._placeholderHeight);\n    }\n    private setAddButton() {\n        this._slideTable\n            .append(\"svg:foreignObject\")\n            .attr(\"class\", \"slide_add\")\n            .attr(\"x\", (this._tableWidth - 40) / 2)\n            .attr(\"cursor\", \"pointer\")\n            .attr(\"width\", 30)\n            .attr(\"height\", 30)\n            .append(\"xhtml:body\")\n            .on(\"click\", this.onAdd)\n            .html('<i class=\"fa fa-file-text-o\"></i>');\n    }\n    private setPlayButton() {\n        this._slideTable\n            .append(\"svg:foreignObject\")\n            .attr(\"id\", \"slide_play\")\n            .attr(\"x\", (this._tableWidth - 40) / 2 + 30)\n            .attr(\"y\", 10)\n            .attr(\"cursor\", \"pointer\")\n            .attr(\"width\", 30)\n            .attr(\"height\", 30)\n            .append(\"xhtml:body\")\n            .on(\"click\", this.onPlay)\n            .html('<i class=\"fa fa-play\"></i>');\n    }\n    private setNextButton() {\n        this._slideTable\n            .append(\"svg:foreignObject\")\n            .attr(\"x\", (this._tableWidth - 40) / 2 + 60)\n            .attr(\"y\", 10)\n            .attr(\"cursor\", \"pointer\")\n            .attr(\"width\", 30)\n            .attr(\"height\", 30)\n            .append(\"xhtml:body\")\n            .on(\"click\", this.onNext)\n            .html('<i class=\"fa fa-forward\"></i>');\n    }\n    private setPreviousButton() {\n        this._slideTable\n            .append(\"svg:foreignObject\")\n            .attr(\"x\", (this._tableWidth - 40) / 2 - 10)\n            .attr(\"y\", 10)\n            .attr(\"cursor\", \"pointer\")\n            .attr(\"width\", 30)\n            .attr(\"height\", 30)\n            .append(\"xhtml:body\")\n            .on(\"click\", this.onPrevious)\n            .html('<i class=\"fa fa-backward\"></i>');\n    }\n}\n"],"names":["d3.event","d3.select","d3.drag","d3.easeLinear"],"mappings":"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"}